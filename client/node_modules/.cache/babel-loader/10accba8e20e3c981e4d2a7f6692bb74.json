{"ast":null,"code":"var _jsxFileName = \"/Users/davidswiatkiewiez/Documents/Programmation/movie-catalog/client/src/components/SearchBox.js\";\nimport React, { useState } from \"react\";\nimport fetchApi from \"./api\";\n/**\n * @param handleMovies Handle movies state of App component\n */\n\nfunction SearchBox({\n  handleMovies\n}) {\n  const [searchField, setSearchField] = useState(); //hook to handle the SearchBox\n  //Setup for startCountDown function\n\n  let typingTimer; //timer identifier\n\n  const typingDelay = 5000; //time in ms\n  //After typingDelay search movies on API\n\n  const startCountDown = () => {\n    clearTimeout(typingTimer);\n    typingTimer = setTimeout(() => {\n      if (searchField) searchMovies();\n    }, typingDelay);\n  };\n\n  const searchMovies = () => {\n    fetchApi.getMovies(searchField).then(movies => {\n      if (!movies) return; //keep necesary data\n\n      const newMovies = movies.map(movie => {\n        return {\n          id: movie.id,\n          title: movie.title,\n          poster_path: movie.poster_path,\n          genre_ids: movie.genre_ids,\n          vote_average: movie.vote_average,\n          release_date: movie.release_date\n        };\n      }); //Save movies in state\n\n      handleMovies(newMovies);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"search\",\n    placeholder: \"search a movie\",\n    onChange: e => {\n      setSearchField(e.target.value);\n    },\n    onKeyUp: () => {\n      startCountDown();\n    },\n    onKeyDown: () => clearTimeout(typingTimer),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      if (searchField) searchMovies();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, \"OK\"));\n}\n\nexport default SearchBox;","map":{"version":3,"sources":["/Users/davidswiatkiewiez/Documents/Programmation/movie-catalog/client/src/components/SearchBox.js"],"names":["React","useState","fetchApi","SearchBox","handleMovies","searchField","setSearchField","typingTimer","typingDelay","startCountDown","clearTimeout","setTimeout","searchMovies","getMovies","then","movies","newMovies","map","movie","id","title","poster_path","genre_ids","vote_average","release_date","e","target","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,QAAP,MAAqB,OAArB;AAEA;;;;AAIA,SAASC,SAAT,CAAmB;AAAEC,EAAAA;AAAF,CAAnB,EAAqC;AACnC,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCL,QAAQ,EAA9C,CADmC,CACe;AAElD;;AACA,MAAIM,WAAJ,CAJmC,CAIlB;;AACjB,QAAMC,WAAW,GAAG,IAApB,CALmC,CAKT;AAE1B;;AACA,QAAMC,cAAc,GAAG,MAAM;AAC3BC,IAAAA,YAAY,CAACH,WAAD,CAAZ;AACAA,IAAAA,WAAW,GAAGI,UAAU,CAAC,MAAM;AAC7B,UAAIN,WAAJ,EAAiBO,YAAY;AAC9B,KAFuB,EAErBJ,WAFqB,CAAxB;AAGD,GALD;;AAOA,QAAMI,YAAY,GAAG,MAAM;AACzBV,IAAAA,QAAQ,CAACW,SAAT,CAAmBR,WAAnB,EAAgCS,IAAhC,CAAsCC,MAAD,IAAY;AAC/C,UAAI,CAACA,MAAL,EAAa,OADkC,CAG/C;;AACA,YAAMC,SAAS,GAAGD,MAAM,CAACE,GAAP,CAAYC,KAAD,IAAW;AACtC,eAAO;AACLC,UAAAA,EAAE,EAAED,KAAK,CAACC,EADL;AAELC,UAAAA,KAAK,EAAEF,KAAK,CAACE,KAFR;AAGLC,UAAAA,WAAW,EAAEH,KAAK,CAACG,WAHd;AAILC,UAAAA,SAAS,EAAEJ,KAAK,CAACI,SAJZ;AAKLC,UAAAA,YAAY,EAAEL,KAAK,CAACK,YALf;AAMLC,UAAAA,YAAY,EAAEN,KAAK,CAACM;AANf,SAAP;AAQD,OATiB,CAAlB,CAJ+C,CAe/C;;AACApB,MAAAA,YAAY,CAACY,SAAD,CAAZ;AACD,KAjBD;AAkBD,GAnBD;;AAqBA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,WAAW,EAAC,gBAFd;AAGE,IAAA,QAAQ,EAAGS,CAAD,IAAO;AACfnB,MAAAA,cAAc,CAACmB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd;AACD,KALH;AAME,IAAA,OAAO,EAAE,MAAM;AACblB,MAAAA,cAAc;AACf,KARH;AASE,IAAA,SAAS,EAAE,MAAMC,YAAY,CAACH,WAAD,CAT/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAYE;AACE,IAAA,OAAO,EAAE,MAAM;AACb,UAAIF,WAAJ,EAAiBO,YAAY;AAC9B,KAHH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAZF,CADF;AAsBD;;AAED,eAAeT,SAAf","sourcesContent":["import React, { useState } from \"react\";\nimport fetchApi from \"./api\";\n\n/**\n * @param handleMovies Handle movies state of App component\n */\n\nfunction SearchBox({ handleMovies }) {\n  const [searchField, setSearchField] = useState(); //hook to handle the SearchBox\n\n  //Setup for startCountDown function\n  let typingTimer; //timer identifier\n  const typingDelay = 5000; //time in ms\n\n  //After typingDelay search movies on API\n  const startCountDown = () => {\n    clearTimeout(typingTimer);\n    typingTimer = setTimeout(() => {\n      if (searchField) searchMovies();\n    }, typingDelay);\n  };\n\n  const searchMovies = () => {\n    fetchApi.getMovies(searchField).then((movies) => {\n      if (!movies) return;\n\n      //keep necesary data\n      const newMovies = movies.map((movie) => {\n        return {\n          id: movie.id,\n          title: movie.title,\n          poster_path: movie.poster_path,\n          genre_ids: movie.genre_ids,\n          vote_average: movie.vote_average,\n          release_date: movie.release_date,\n        };\n      });\n\n      //Save movies in state\n      handleMovies(newMovies);\n    });\n  };\n\n  return (\n    <div>\n      <input\n        type=\"search\"\n        placeholder=\"search a movie\"\n        onChange={(e) => {\n          setSearchField(e.target.value);\n        }}\n        onKeyUp={() => {\n          startCountDown();\n        }}\n        onKeyDown={() => clearTimeout(typingTimer)}\n      />\n      <button\n        onClick={() => {\n          if (searchField) searchMovies();\n        }}\n      >\n        OK\n      </button>\n    </div>\n  );\n}\n\nexport default SearchBox;\n"]},"metadata":{},"sourceType":"module"}